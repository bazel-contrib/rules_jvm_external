common --enable_bzlmod
common --enable_workspace=false

# Set the default java toolchain
build --java_runtime_version=remotejdk_11
build --tool_java_language_version=11

# Required to get `protobuf` compiling. Note that MSVC requires a
# different flag than both macOS and Linux.

common --enable_platform_specific_config
common:linux --cxxopt=-std=c++17
common:linux --host_cxxopt=-std=c++17
common:macos --cxxopt=-std=c++17
common:macos --host_cxxopt=-std=c++17
common:windows --cxxopt=/std:c++17
common:windows --host_cxxopt=/std:c++17

# Enable protobuf MSVC support on Windows
build:windows --define=protobuf_allow_msvc=true

# Proto toolchain resolution
common --incompatible_enable_proto_toolchain_resolution
common --@com_google_protobuf//bazel/toolchains:prefer_prebuilt_protoc=true
